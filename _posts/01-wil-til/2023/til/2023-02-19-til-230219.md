---
title: âœ¨TIL - ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ì½”ë”© ì‹œì‘!
author: ggggraceful
date: 2023-02-19
categories: [01.TIL/WIL, TIL]
tags: [TIL]
---

<br/>
<br/>

# QueryDsl ì„¤ì •

---

ì›ë˜ëŠ” JPAë¥¼ ì‚¬ìš© ì •ë ¬ê³¼ í•„í„°ë¥¼ ì‹œë„í•´ ë³´ë ¤í–ˆë‹¤. JPAë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ Querydslì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ë‘˜ ë‹¤ ê²°êµ­ OrderByë¥¼ ì‚¬ìš©í•´ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.  
ë‹¤ìŒì€ ë‚´ê°€ ì°¾ì•„ë³¸ JPAë¥¼ ì‚¬ìš©í•´ì„œ ì •ë ¬í•˜ëŠ” ë°©ë²•ì´ë‹¤.  


```java
@Controller
public List<T> list(Pageable pageable)
{
  List<T> tList = jpaRepository.findAll(pageable);
  return tList;
}
```

```java
public Page<T> findAllByNameOrderByCreatedDateDesc();
```

- [ì°¸ê³ ë§í¬](https://jistol.github.io/spring/2017/02/11/jpa-sort/)
- [8. Spring Data JPAì™€ QueryDSL ì´í•´](https://rutgo-letsgo.tistory.com/207)

ê²°êµ­ Querydslë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ë‚«ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´  
Querydslì— ëŒ€í•œ ì„¤ì •ì„` í–ˆë‹¤.
`
( )

<br/>
<br/>
<br/>

# Spirng Boot 3.0 + 

---

 ì§€ë‚œë²ˆì—ëŠ” Java(11) / Spring(2.7.6) ë²„ì „ì„ ì‚¬ìš©í–ˆì—ˆëŠ”ë°  
ì´ë²ˆì—ëŠ” Java(17) / Spring(3.0.2) ë²„ì „ì„ ì‚¬ìš©í•´ì„œ  
ì„¤ì •ë¶€ë¶„ì´ ì¢€ ë‹¬ë¼ì¡Œë‹¤.

ì§€ë‚œë²ˆì—ë„ ì´ë²ˆì—ë„ Querydslì˜ ë²„ì „ì€ 5.0.0ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

( ğŸ›¸ Spirng boot 3.0ì—ì„œ ë‹¬ë¼ì§„ ë¶€ë¶„ ì„œìˆ  )

Java(11) / Spring(2.7.6) + Querydsl ì‚¬ìš©ì‹œì˜ build.gradle
```java
//queryDsl version ì •ë³´ ì¶”ê°€ 
// ğŸ‘‰ ì´ë²ˆì—ëŠ” ë²„ì „ê´€ë¦¬ë¥¼ ë”°ë¡œ í•˜ì§€ ì•Šì•„ í•„ìš”ì—†ëŠ” ë¶€ë¶„ìœ¼ë¡œ ì‚­ì œ
buildscript {
    ext {
        queryDslVersion = "5.0.0"
    }
}

plugins {
    id 'java'
    id 'org.springframework.boot' version '2.7.5' // ğŸ‘‰ ìŠ¤í”„ë§ë¶€íŠ¸ 3.0.2ë²„ì „ ì‚¬ìš©
    id 'io.spring.dependency-management' version '1.0.15.RELEASE'
//querydsl plugins ì¶”ê°€ ğŸ‘‰ ì´ë²ˆ ë²„ì „ì—ì„œëŠ” ì‚­ì œ
    id "com.ewerk.gradle.plugins.querydsl" version "1.0.10"
}

group = 'com.sparta'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11' // ğŸ‘‰ ìë°” 17ë²„ì „ ì‚¬ìš© 

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'
    runtimeOnly 'com.h2database:h2'

    // querydsl ğŸ‘‰ ìƒˆë¡œìš´ ë‚´ìš©ìœ¼ë¡œ ë³€ê²½
    implementation "com.querydsl:querydsl-jpa:${queryDslVersion}"
    implementation "com.querydsl:querydsl-apt:${queryDslVersion}"

    //mysql
    runtimeOnly 'com.mysql:mysql-connector-j'

    //s3
    implementation 'io.awspring.cloud:spring-cloud-starter-aws:2.4.2'

    //jwt
    compileOnly group: 'io.jsonwebtoken', name: 'jjwt-api', version: '0.11.2'
    runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-impl', version: '0.11.2'
    runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-jackson', version: '0.11.2'

    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'

    // validation
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // redis
    implementation 'org.springframework.boot:spring-boot-starter-data-redis'

    //p6spy
    implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.8.1'

    //swagger
    implementation 'io.springfox:springfox-swagger2:3.0.0'
    implementation 'io.springfox:springfox-swagger-ui:3.0.0'

}

tasks.named('test') {
    useJUnitPlatform()
}

/*
* queryDSL ì„¤ì • ì¶”ê°€ ğŸ‘‰ ì´ë²ˆ ë²„ì „ì—ì„œëŠ” ì´ ë¶€ë¶„ë„ í•„ìš”ì—†ì–´ì„œ ì „ë¶€ ì‚­ì œ
*/
// querydslì—ì„œ ì‚¬ìš©í•  ê²½ë¡œ ì„¤ì •
def querydslDir = "$buildDir/generated/querydsl"
// JPA ì‚¬ìš© ì—¬ë¶€ì™€ ì‚¬ìš©í•  ê²½ë¡œë¥¼ ì„¤ì •
querydsl {
    library = "com.querydsl:querydsl-apt"
    jpa = true
    querydslSourcesDir = querydslDir
}
// build ì‹œ ì‚¬ìš©í•  sourceSet ì¶”ê°€
sourceSets {
    main.java.srcDir querydslDir
}
// querydsl ì»´íŒŒì¼ì‹œ ì‚¬ìš©í•  ì˜µì…˜ ì„¤ì •
compileQuerydsl {
    options.annotationProcessorPath = configurations.querydsl
}
// querydsl ì´ compileClassPath ë¥¼ ìƒì†í•˜ë„ë¡ ì„¤ì •
configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
    querydsl.extendsFrom compileClasspath
}
jar {
    enabled = false
}

tasks.named('test') {
    useJUnitPlatform()
}

```

í˜„ì¬  
Java(17) / Spring(3.0.2) + Querydsl ì‚¬ìš©ì‹œì˜ build.gradle
```java
plugins {
   id 'java'
   id 'org.springframework.boot' version '3.0.2'
   id 'io.spring.dependency-management' version '1.1.0'
}

group = 'com.ilcle'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

configurations {
   compileOnly {
      extendsFrom annotationProcessor
   }
}

repositories {
   mavenCentral()
}

dependencies {
   implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
   implementation 'org.springframework.boot:spring-boot-starter-security'
   implementation 'org.springframework.boot:spring-boot-starter-web'
   compileOnly 'org.projectlombok:lombok'
   developmentOnly 'org.springframework.boot:spring-boot-devtools'
   runtimeOnly 'com.h2database:h2'
   annotationProcessor 'org.projectlombok:lombok'
   testImplementation 'org.springframework.boot:spring-boot-starter-test'
   testImplementation 'org.springframework.security:spring-security-test'

// querydsl ğŸ‘‰ ë³€ê²½ëœ ë‚´ ì¶”ê°€
   implementation 'com.querydsl:querydsl-core'
   implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'
   annotationProcessor "com.querydsl:querydsl-apt:${dependencyManagement.importedProperties['querydsl.version']}:jakarta"
   annotationProcessor "jakarta.annotation:jakarta.annotation-api"
   annotationProcessor "jakarta.persistence:jakarta.persistence-api"

//mysql
implementation 'mysql:mysql-connector-java'

//jwt
compileOnly group: 'io.jsonwebtoken', name: 'jjwt-api', version: '0.11.2'
   runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-impl', version: '0.11.2'
   runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-jackson', version: '0.11.2'

//ìŠ¤ì›¨ê±°
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2'
   implementation 'org.springdoc:springdoc-openapi-starter-common'
}


tasks.named('test') {
   useJUnitPlatform()
}
```
