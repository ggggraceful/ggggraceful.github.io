---
title: â—ERROR - ec2ì— codedeploy agent ì„¤ì¹˜ì¤‘ ì—ëŸ¬
author: ggggraceful
date: 2023-02-26
categories: [02.ERROR]
tags: [error]
---

<br/>
<br/>

---

## ğŸ§¶ Trouble

---

<br/>

ec2ì— codedeploy agentë¥¼ ì„¤ì¹˜í•˜ë˜ ì¤‘  
ë§ˆì§€ë§‰ ëª…ë ¹ì–´ì¸

```
sudo service codedeploy-agent status
```

ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤. 

ì´ ëª…ë ¹ì–´ëŠ” ì„¤ì¹˜í›„ ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ì¤‘ì¸ì§€ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ì¸ë°  
ì—ëŸ¬ê°€ ë°œìƒí•´  
ì„¤ì¹˜ê°€ ì œëŒ€ë¡œ ë˜ì–´ ì‹¤í–‰ì¤‘ì¸ì§€ í™•ì¸í•  ìˆ˜ ì—†ê²Œ í–ˆë‹¤.

<br/>
<br/>

ë¨¼ì € ec2ì— codedeploy agent ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ë‹¤. 

### ec2ì— codedeploy agent ì„¤ì¹˜

<br/>

ë‹¤ìŒìœ¼ë¡œ ì´ë™
```
cd /home/ubuntu
```

<br/>

```
wget https://bucket-name.s3.region-identifier.amazonaws.com/latest/install
```

<br/>

```
chmod +x ./install
```

<br/>

Ubuntu 20.04ì—ì„œ ìµœì‹  ë²„ì „ì˜ CodeDeploy ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜ì‹œ
```
sudo ./install auto > /tmp/logfile
```

<br/>

ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸ (â›”ï¸ error ë°œìƒ ë¶€ë¶„)
```
sudo service codedeploy-agent status
```


<br/>
<br/>


---

## âœ‚ï¸ Shooting

---

<br/>

ì´ ëª…ë ¹ì–´ë“¤ì„ ì‹¤í–‰ì‹œì¼œì£¼ê³  ë‹¤ì‹œ ì‹œë„í–ˆì„ ë•Œ ì—ëŸ¬ê°€ ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ë‹¤. 

<br/>
<br/>

```
sudo apt-get install ruby-full ruby-webrick wget -y
```

<br/>

```
cd /tmp
```

<br/>

```
wget https://aws-codedeploy-ap-northeast-2.s3.ap-northeast-2.amazonaws.com/releases/codedeploy-agent_1.3.2-1902_all.deb
```

<br/>

```
mkdir codedeploy-agent_1.3.2-1902_ubuntu22
```

<br/>

```
dpkg-deb -R codedeploy-agent_1.3.2-1902_all.deb codedeploy-agent_1.3.2-1902_ubuntu22
```

<br/>

```
sed 's/Depends:.*/Depends:ruby3.0/' -i ./codedeploy-agent_1.3.2-1902_ubuntu22/DEBIAN/control
```

<br/>

```
dpkg-deb -b codedeploy-agent_1.3.2-1902_ubuntu22/
```

<br/>

```
sudo dpkg -i codedeploy-agent_1.3.2-1902_ubuntu22.deb
```

<br/>

```
sudo systemctl list-units --type=service | grep codedeploy
```

<br/>

```
sudo service codedeploy-agent status
```

<br/>
<br/>

--- 

(ì°¸ê³ )

- [Ubuntu Serverìš© CodeDeploy ì—ì´ì „íŠ¸ ì„¤ì¹˜](https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/codedeploy-agent-operations-install-ubuntu.html)
- [AWS CodeDeploy agent not installing on ubuntu 22.04](https://stackoverflow.com/questions/73301858/aws-codedeploy-agent-not-installing-on-ubuntu-22-04)
